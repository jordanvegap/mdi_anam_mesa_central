SalesDashboard.dashboardModel=function(){var a=this,h=null,g=$("#loadPanel").dxLoadPanel({hideOnOutsideClick:!1,shadingColor:"rgba(0,0,0,0.4)",showIndicator:!0,showPane:!0,shading:!0,visible:!0}).dxLoadPanel("instance");a.patname=window.location.pathname;a.TimeZoneServidor=localStorage.getItem("tmzServidor");a.TimeZoneEmpleado=localStorage.getItem("tmzEmpleado");a.TiempoUTCEmpleado=DiferencieTimeZones();a.LoadCatFull=!1;a.setDefaultValues=!0;a.DatosEmpleadosGet=null;a.T_obj_SessionInfo=null;a._Obj_Empleados_Grid_iEmp=
new DevExpress.data.ArrayStore({data:[]});a._Cmb_Proceso_ObjData=new DevExpress.data.ArrayStore({data:[]});a._Cmb_Estatus_Empl_ObjData=new DevExpress.data.ArrayStore({data:[]});a._Cmb_SubProceso_ObjData=new DevExpress.data.ArrayStore({data:[]});a._CountryCodes_ObjData=new DevExpress.data.ArrayStore({data:[]});a._TimeZones_ObjData=new DevExpress.data.ArrayStore({data:[]});a.CatalogosPantalla=[];a.NombreAutor=null;a.init=function(){$("#splashscreen").fadeOut(1E3);Globalize.loadMessages(dictionary);
var q=function(){var c=sessionStorage.getItem("locale");return null!=c?c:"es"}();Globalize.locale(q);DevExpress.localization.locale(q);q=decrypt(localStorage.getItem("DatosEncriptados"));h=JSON.parse(q);a.T_obj_SessionInfo=JSON.parse(localStorage.getItem("obj_SessionInfo"));a.NombreAutor=`${h.EMPLEADO_NOMBREEMPLEADO} ${h.EMPLEADO_APATERNOEMPLEADO} ${h.EMPLEADO_AMATERNOEMPLEADO}`;g.hide();a._PopSearchEmpleado=$("#Pop_Busqueda_Empleados").dxPopup({width:20,height:20,visible:!1,showTitle:!0,showCloseButton:!0,
title:"",hideOnOutsideClick:!1,onHiding:function(c){c.component.content().empty()}}).dxPopup("instance");a._Pop_Colonias_Codigo_Postal=$("#Pop_Colonias_Codigo_Postal").dxPopup({width:600,height:300,showTitle:!0,title:"Selecciona la colonia correspondiente",visible:!1,dragEnabled:!1,hideOnOutsideClick:!1,shadingColor:"#000000bf",onHiding:function(c){$("#Datagrid_Colonias_Codigo_Postal").dxDataGrid("instance").option("dataSource",[])},onShowing:function(c){},onShown:function(c){},contentTemplate:function(c){c.append($("<div />").attr({id:"Datagrid_Colonias_Codigo_Postal",
style:"margin-top: 0px;"}).dxDataGrid({dataSource:[],height:200,showBorders:!0,columnMinWidth:100,columnAutoWidth:!0,selection:{mode:"single"},filterRow:{visible:!0,applyFilter:"auto"},columns:[{dataField:"COLONIA",caption:"Colonia"},{dataField:"ESTADO",caption:"Estado"},{dataField:"MUNICIPIO",caption:"Delegacion/Municipio"}],scrolling:{mode:"virtual"},sorting:{mode:"none"},onRowDblClick:function(b){a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_EDO_CSCESTADO").option("value",b.data.ID_ESTADO);
a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_MUNICIPIO").option("value",b.data.MUNICIPIO);a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_COLONIA").option("value",b.data.COLONIA);a._Pop_Colonias_Codigo_Postal.hide()}}),$("<div />").attr({id:"Btn_Selec_Municipio",style:"margin-top: 10px;"}).dxButton({stylingMode:"contained",type:"default",width:"100%",icon:"fa fa-check",text:"Seleccionar Colonia",onClick:function(b){b=$("#Datagrid_Colonias_Codigo_Postal").dxDataGrid("instance").option("selectedRowKeys");
console.log(b);0==b.length?DevExpress.ui.notify("SELECCIONA UNA COLONIA","error",3E3):(a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_EDO_CSCESTADO").option("value",b[0].ID_ESTADO),a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_MUNICIPIO").option("value",b[0].MUNICIPIO),a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_COLONIA").option("value",b[0].COLONIA),a._Pop_Colonias_Codigo_Postal.hide())}}))}}).dxPopup("instance");a._Pop_Confirma_Baja_Vacantes=$("#Pop_Confirma_Baja_Vacantes").dxPopup({width:340,
height:100,showTitle:!1,visible:!1,dragEnabled:!1,hideOnOutsideClick:!1,shadingColor:"#000000bf",onHiding:function(c){},contentTemplate:function(c){c.append($("<div />").attr({style:"padding: 5px; height: 100%;"}).append($("<div />").attr({style:"padding-top: 5px; \n                padding-bottom: 15px; \n                padding-left: 18px; \n                padding-right: 18px; \n                font-size: 14px; \n                text-align: center; \n                font-weight: 700;"}).append("\u00bfDesea Conservar la vacante?"),
$("<div />").attr({id:"Toolbar_Confirma_Baja_Vacantes",style:"margin-top: 0px;"}).dxToolbar({items:[{location:"before",widget:"dxButton",options:{width:150,type:"default",icon:"edit",text:"Conservar Vacante",onInitialized:function(b){$Boton_Conservar_Vacante=b.component},onClick:function(){g.show();var b=jslinq(a.__Estatus_Headcount).where(function(e){return-1!=e.ESTATUS_CLAVE.indexOf("VAC")}).toList(),d=jslinq(a.__Sub_Estatus_Headcount).where(function(e){return e.ESTATUS_HEADCOUNT_CSC==b[0].ESTATUS_HEADCOUNT_CSC}).toList();
d={Type:localStorage.getItem("Type"),EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),DATA_UPDATE:{HCA_FECHA_PROGRAMADA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),HCA_FECHA_PROGRAMADA_FIN:moment().add(1,"months").tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),EMPLEADO_CSC_EMPLEADO:null,TIPO_ESTATUS_HEADCOUNT_CSC:b[0].ESTATUS_HEADCOUNT_CSC,SUBESTATUS_HEADCOUNT_CSC:d[0].SUBESTATUS_HEADCOUNT_CSC,HCA_FECHA_ESTATUS:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),
AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")},DATA_WHERE:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),HCA_PUESTOS_CSC:a.DatosEmpleadosGet.TIPO_VACANTE_CSC}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Update_Headcaunt_Autorizado","POST",JSON.stringify(d),getJSON(DeveloperType).ApiRecursosHumanos.token).then(e=>{e={Type:localStorage.getItem("Type"),EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),
DATA_UPDATE:{TIPO_VACANTE_CSC:null,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")},DATA_WHERE:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,EMPLEADO_UNIQUE_ID:a.DatosEmpleadosGet.EMPLEADO_UNIQUE_ID}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Update_Empleado","POST",JSON.stringify(e),getJSON(DeveloperType).ApiRecursosHumanos.token).then(f=>
{a.Insert_Bitacora_Puestos_Anteriores();g.hide()}).catch(function(f){g.hide();a._Pop_Confirma_Baja_Vacantes.hide();console.log(f);DevExpress.ui.notify("ERROR DE COMUNICACION CON EL SERVIDOR VACANTE NO LIBERADA, INTENTELO NUEVAMETE MAS TARDE","error",3E3)})}).catch(function(e){g.hide();a._Pop_Confirma_Baja_Vacantes.hide();console.log(e);DevExpress.ui.notify("ERROR DE COMUNICACION CON EL SERVIDOR VACANTE NO LIBERADA, INTENTELO NUEVAMETE MAS TARDE","error",3E3)})}}},{location:"after",widget:"dxButton",
options:{width:150,type:"danger",icon:"trash",text:"Eliminar Vacante",onInitialized:function(b){$Boton_Eliminar_Vacante=b.component},onClick:function(){g.show();var b={Type:localStorage.getItem("Type"),EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),HCA_PUESTOS_CSC:a.DatosEmpleadosGet.TIPO_VACANTE_CSC};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Delete_Headcaunt_Autorizado","POST",JSON.stringify(b),getJSON(DeveloperType).ApiRecursosHumanos.token).then(d=>
{d={Type:localStorage.getItem("Type"),EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),DATA_UPDATE:{TIPO_VACANTE_CSC:null,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")},DATA_WHERE:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,EMPLEADO_UNIQUE_ID:a.DatosEmpleadosGet.EMPLEADO_UNIQUE_ID}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+
"Update_Empleado","POST",JSON.stringify(d),getJSON(DeveloperType).ApiRecursosHumanos.token).then(e=>{a.Insert_Bitacora_Puestos_Anteriores();g.hide()}).catch(function(e){g.hide();a._Pop_Confirma_Baja_Vacantes.hide();console.log(e);DevExpress.ui.notify("ERROR DE COMUNICACION CON EL SERVIDOR EMPLEADO NO ACTUALIZADO, INTENTELO NUEVAMETE MAS TARDE","error",3E3)})}).catch(function(d){g.hide();a._Pop_Confirma_Baja_Vacantes.hide();console.log(d);DevExpress.ui.notify("ERROR DE COMUNICACION CON EL SERVIDOR VACANTE NO ELIMINADA, INTENTELO NUEVAMETE MAS TARDE",
"error",3E3)})}}}]})))}}).dxPopup("instance");a.__Pop_DataGrid_Vacantes=$("#Pop_DataGrid_Vacantes").dxPopup({width:900,height:350,showTitle:!0,title:"Organigrama",visible:!1,dragEnabled:!1,hideOnOutsideClick:!1,shadingColor:"#000000bf",onHiding:function(c){},onShowing:function(c){g.show();$("#DataGrid_Vacantes").dxDataGrid("instance").refresh().done(function(){g.hide()}).fail(function(b){g.hide();console.log(b)})},contentTemplate:function(c){c.append($("<div />").attr({id:"DataGrid_Vacantes",style:"margin-top: 0px;"}).dxDataGrid({selection:{mode:"none"},
height:"100%",scrolling:{mode:"virtual"},hoverStateEnabled:!0,showBorders:!0,showRowLines:!0,showColumnLines:!0,rowAlternationEnabled:!0,columnAutoWidth:!1,columnWidth:150,filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},dataSource:new DevExpress.data.DataSource({loadMode:"raw",load:async function(){try{var b={Type:localStorage.getItem("Type"),EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),ESTATUS_CLAVE:"VAC"};
return __Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Get_Headcount_Autorizado_By_Clave_Estatus","GET",b,getJSON(DeveloperType).ApiRecursosHumanos.token).then(function(d){if(1==d.success)return d.JsonData;console.log(d.message);return[]})}catch(d){console.log(d)}}}),columns:[{width:110,fixed:!0,type:"buttons",buttons:[{text:"Seleccionar",onClick(b){g.show();var d=Object.assign({},b.row.data),e=jslinq(a.__Estatus_Headcount).where(function(f){return-1!=f.ESTATUS_CLAVE.indexOf("VAC")}).toList();
b=jslinq(a.__Sub_Estatus_Headcount).where(function(f){return f.ESTATUS_HEADCOUNT_CSC==e[0].ESTATUS_HEADCOUNT_CSC}).toList();b={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),DATA_UPDATE:{TIPO_ESTATUS_HEADCOUNT_CSC:e[0].ESTATUS_HEADCOUNT_CSC,SUBESTATUS_HEADCOUNT_CSC:b[0].SUBESTATUS_HEADCOUNT_CSC,EMPLEADO_CSC_EMPLEADO:null,HCA_FECHA_PROGRAMADA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),HCA_FECHA_PROGRAMADA_FIN:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),
HCA_FECHA_ESTATUS:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")},DATA_WHERE:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Update_Headcaunt_Autorizado","POST",JSON.stringify(b),getJSON(DeveloperType).ApiRecursosHumanos.token).then(f=>
{f={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),DATA_UPDATE:{TIPO_VACANTE_CSC:d.HCA_PUESTOS_CSC,CAT_CATEGORIA_PUESTO_CSC:d.CAT_CATEGORIA_PUESTO_CSC,CAT_PUESTO_CSCEMPLEADO:d.TIPO_PUESTO_CSCEMPLEADO,CAT_CENTRO_COSTOS_CSC:d.CAT_CENTRO_COSTOS_CSC,CAT_AREA_CSC:d.TIPO_AREA_CSC,CAT_DEPARTAMENTO_CSC:d.EMPLEADO_DEPARTAMENTO_CSC,REQ_CSCREQUISICION:d.HCA_REQ_CSCREQUISICION,TIPO_UBICACION_LABORAL_CSC:d.TIPO_UBICACION_LABORAL_CSC,TIPO_EMPLEADO_COMPARTIDO_CSC:d.TIPO_EMPLEADO_COMPARTIDO_CSC,
TIPO_EMPLEADO_WS_CSC:d.TIPO_EMPLEADO_WS_CSC,TIPO_EMPLEADO_EMPLEADO_CSC:d.TIPO_EMPLEADO_EMPLEADO_CSC,TIPO_FRECUENCIA_CSC:d.TIPO_FRECUENCIA_CSC,SAMT_PF_TIPO_ACTUALIZA_EMPLEADO_CSC:d.SAMT_PF_TIPO_ACTUALIZA_EMPLEADO_CSC,CAT_PROVEEDOR_CSC:d.CAT_PROVEEDOR_CSC,TIPO_TURNO_CSCTURNO:d.TIPO_TURNO_CSCTURNO,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")},DATA_WHERE:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),
EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,EMPLEADO_UNIQUE_ID:a.DatosEmpleadosGet.EMPLEADO_UNIQUE_ID}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Update_Empleado","POST",JSON.stringify(f),getJSON(DeveloperType).ApiRecursosHumanos.token).then(k=>{if(!0===k.success){var u=jslinq(a.__Estatus_Headcount).where(function(l){return-1!=l.ESTATUS_CLAVE.indexOf("CUB")}).toList();k=jslinq(a.__Sub_Estatus_Headcount).where(function(l){return l.ESTATUS_HEADCOUNT_CSC==u[0].ESTATUS_HEADCOUNT_CSC}).toList();
k={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),DATA_UPDATE:{TIPO_ESTATUS_HEADCOUNT_CSC:u[0].ESTATUS_HEADCOUNT_CSC,SUBESTATUS_HEADCOUNT_CSC:k[0].SUBESTATUS_HEADCOUNT_CSC,EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,HCA_FECHA_CUBRE_VACANTE:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),HCA_FECHA_ESTATUS:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")},
DATA_WHERE:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),HCA_PUESTOS_CSC:d.HCA_PUESTOS_CSC}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Update_Headcaunt_Autorizado","POST",JSON.stringify(k),getJSON(DeveloperType).ApiRecursosHumanos.token).then(l=>{1==l.success?(l={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),DATA_INSERT:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),HCA_PUESTOS_CSC:d.TIPO_PUESTO_CSCEMPLEADO,
CSC_PUESTO:d.TIPO_PUESTO_CSCEMPLEADO,CAT_CATEGORIA_PUESTO_CSC:d.CAT_CATEGORIA_PUESTO_CSC,EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,EMPLEADO_RESPONSABLE_CSC:h.EMPLEADO_CSC_EMPLEADO,HCD_FECHA_INICIA:d.HCA_FECHA_PROGRAMADA,HCD_FECHA_FIN:d.HCA_FECHA_PROGRAMADA_FIN,AUDITORIA_USU_ALTA:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,AUDITORIA_USU_ULT_MOD:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ALTA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")}},
__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Headcount_Detalle","POST",JSON.stringify(l),getJSON(DeveloperType).ApiRecursosHumanos.token).then(m=>{1==m.success?(m={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),Type:localStorage.getItem("Type"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,CAM_CSC_SERVICIO:d.CAM_CSC_SERVICIO},__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+
"Get_Cam_Servicios_Empleado","GET",m,getJSON(DeveloperType).ApiRecursosHumanos.token).then(async function(n){1==n.success?(d.CLIENTE_CSC==a.DatosEmpleadosGet.CLIENTE_CSC&&d.PM_CSC_PROYECTO==a.DatosEmpleadosGet.PM_CSC_PROYECTO&&d.CAM_CSC_SERVICIO==a.DatosEmpleadosGet.CAM_CSC_SERVICIO?console.log("Los datos del empleado de cliente proyectoy servicio son los mismos que ya tenia el empleado"):await new Promise(function(p,t){var r={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),
DATA_INSERT:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,BITACORA_FECHA_INICIO:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),BITACORA_FECHA_FIN:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_USU_ALTA:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ALTA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")}};
__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Empleado_Bitacora_Cliente","POST",JSON.stringify(r),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async v=>{p("resolve")}).catch(function(v){console.log(v);t("reject")})}),a.__Pop_DataGrid_Vacantes.hide(),a.RestablecerBotonesEndUpdate(),n={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_UNIQUE_ID:a.Frm_Datos_Empleado.option("formData").EMPLEADO_UNIQUE_ID},
a.BuscaEmpleados(n,"CargaDatos"),DevExpress.ui.notify("ACTUALIZACION CORRECTA","success",3E3),g.hide()):(n={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),Type:localStorage.getItem("Type"),DATA_INSERT:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,CAM_CSC_SERVICIO:d.CAM_CSC_SERVICIO,SERVICIOS_EMP_UNIQUE:createUUID(36),TEL:1,CHAT:0,REDES_SOCIALES:0,
MAIL:0,DNA:0,TEL_OUT:0,SMS:0,VIDEO_CONFERENCIA:0,NOTIFICACIONES:0,ACD:0,ACTIVO_BARCONTACT:0,SERVICIO_PRINCIPAL:0,SERVICIO_ACTIVO:1,SERVICIO_FECHA_INICIO:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD"),SERVICIO_FECHA_FIN:moment().add(1,"years").tz(a.TimeZoneServidor).format("YYYY-MM-DD"),AUDITORIA_USU_ALTA:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ALTA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")}},
__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Cam_Servicio_Empleados","POST",JSON.stringify(n),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async function(p){1==p.success?DevExpress.ui.notify("ACTUALIZACION CORRECTA","success",3E3):DevExpress.ui.notify("REALCION SERVICIO NO CREADA","error",3E3);d.CLIENTE_CSC==a.DatosEmpleadosGet.CLIENTE_CSC&&d.PM_CSC_PROYECTO==a.DatosEmpleadosGet.PM_CSC_PROYECTO&&d.CAM_CSC_SERVICIO==a.DatosEmpleadosGet.CAM_CSC_SERVICIO?console.log("Los datos del empleado de cliente proyectoy servicio son los mismos que ya tenia el empleado"):
await new Promise(function(t,r){var v={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),DATA_INSERT:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,BITACORA_FECHA_INICIO:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),BITACORA_FECHA_FIN:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_USU_ALTA:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,
AUDITORIA_FEC_ALTA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Empleado_Bitacora_Cliente","POST",JSON.stringify(v),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async w=>{t("resolve")}).catch(function(w){console.log(w);r("reject")})});a.__Pop_DataGrid_Vacantes.hide();a.RestablecerBotonesEndUpdate();p={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),
Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_UNIQUE_ID:a.Frm_Datos_Empleado.option("formData").EMPLEADO_UNIQUE_ID};a.BuscaEmpleados(p,"CargaDatos");g.hide()}).catch(function(p){console.log(p);g.hide();DevExpress.ui.notify("ERROR DE COMUNICACI\u00d3N, REALCION SERVICIO NO CREADA","error",3E3)}))})):(g.hide(),DevExpress.ui.notify("NO SE PUEDE GENERAR BITACORAS DE HEADCAUNT, INTENTELO NUEVAMENTE","error",3E3))}).catch(function(m){console.log(m);
g.hide();DevExpress.ui.notify("ERROR DE COMUNICACI\u00d3N, NO SE PUEDE GENERAR BITACORA HEADCOUNT","error",3E3)})):(g.hide(),DevExpress.ui.notify("NO SE PUEDE ACTUALIZAR EL HEADCAUNT INTENTELO NUEVAMENTE","error",3E3))}).catch(function(l){console.log(l);g.hide();DevExpress.ui.notify("ERROR DE COMUNICACI\u00d3N, NO SE PUEDE ACTUALIZAR LA VACANTE INTENTELO NUEVAMENTE","error",3E3)})}else g.hide(),DevExpress.ui.notify("NO SE PUEDE ACTUALIZAR EL EMPLEADO, INTENTELO MAS TARDE","error",3E3)}).catch(function(k){console.log(k);
g.hide();DevExpress.ui.notify("ERROR DE COMUNICACI\u00d3N, NO SE PUEDE ACTUALIZAR EL EMPLEADO, INTENTELO MAS TARDE","error",3E3)})}).catch(function(f){console.log(f);g.hide();DevExpress.ui.notify("ERROR DE COMUNICACI\u00d3N, NO SE PUEDO VALIDAR VACANTEAS EXISTENTES, INTENTELO MAS TARDE","error",3E3)})}}]},{width:100,alignment:"left",caption:"ID",dataField:"HCA_PUESTOS_CSC"},{alignment:"left",caption:"Estatus",dataField:"TIPO_ESTATUS_HEADCOUNT_CSC",lookup:{valueExpr:"ESTATUS_HEADCOUNT_CSC",displayExpr:"ESTATUS_HC_IDIOMA1",
dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_ESTATUS_HEADCOUNT"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Fecha Inicio",dataField:"HCA_FECHA_PROGRAMADA"},{alignment:"left",caption:"Cliente",dataField:"CLIENTE_CSC",
lookup:{valueExpr:"CLIENTE_CSC",displayExpr:"CLIENTE_NOMBRE",dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CLIENTES"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Campa\u00f1a",dataField:"PM_CSC_PROYECTO",lookup:{valueExpr:"PM_CSC_PROYECTO",
displayExpr:"PM_NOMBRE",dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_PROYECTOS"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Subcampa\u00f1a",dataField:"CAM_CSC_SERVICIO",lookup:{valueExpr:"CAM_CSC_SERVICIO",displayExpr:"CAM_SERVICIO_NOMBRE",
dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CAM_SERVICIO"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Turno",dataField:"TIPO_TURNO_CSCTURNO",lookup:{valueExpr:"TIPO_TURNO_CSCTURNO",displayExpr:"TIPO_TURNO_IDIOMA1",dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",
paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_TIPO_TURNO_EMPLEADOS"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Presupuesto Contrato",dataField:"HCA_PRESUPUESTO_CONTRATADO"},{alignment:"left",caption:"Categoria Puesto",dataField:"CAT_CATEGORIA_PUESTO_CSC",lookup:{valueExpr:"CAT_CATEGORIA_PUESTO_CSC",
displayExpr:"CAT_CATEGORIA_PUESTO_IDIOMA1",dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CAT_CATEGORIA_PUESTO"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Puesto",dataField:"TIPO_PUESTO_CSCEMPLEADO",lookup:{valueExpr:"TIPO_PUESTO_CSCEMPLEADO",
displayExpr:"TIPO_PUESTO_IDIOMA1",dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_TIPO_PUESTO_EMPLEADO"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Area",dataField:"TIPO_AREA_CSC",lookup:{valueExpr:"TIPO_AREA_CSC",displayExpr:"TIPO_AREA_IDIOMA1",
dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CAT_EMPLEADO_AREA"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Departamento",dataField:"EMPLEADO_DEPARTAMENTO_CSC",lookup:{valueExpr:"EMPLEADO_DEPARTAMENTO_CSC",displayExpr:"SAMT_TIPO_DEPARTAMENTO_IDIOMA1",
dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CAT_EMPLEADO_DEPARTAMENTO"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}},{alignment:"left",caption:"Reaquisici\u00f3n",dataField:"HCA_REQ_CSCREQUISICION",lookup:{valueExpr:"REQ_CSCREQUISICION",displayExpr:"REQ_NOMBREAREA",
dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_REQUISICIONES"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message);return[]})}catch(b){console.log(b)}}})}}}]}))}}).dxPopup("instance");a.TabPanelEmpleadoExtra=$("#TabPanelEmpleadoExtra").dxTabPanel({height:260,selectedIndex:0,loop:!1,animationEnabled:!1,
swipeEnabled:!1,deferRendering:!1,onSelectionChanged(c){$(".selected-index").text(c.component.option("selectedIndex")+1)}}).dxTabPanel("instance");a.TabPanelEmpleadoExtra.option("dataSource",[{icon:"./images/Icons/Card-file-icon64.png",title:"Mi men\u00fa",template:"tab_miMenu"}]);a.Btns_Configurador=$("#BtnsAcciones").dxForm({readOnly:!0,labelLocation:"left",colCount:2}).dxForm("instance");a.TabBarEventos=$("#___Tab_Empleados").dxToolbar({onContentReady:function(){$btn_Alta_Empleado.option("visible",
!0);$btn_Modificar_Empleado.option("visible",!0);$btn_Salvar_Alta_Empleado.option("visible",!1);$btn_Salvar_Modifica_Empleado.option("visible",!1);$btn_Cancelar_Alta_Empleado.option("visible",!1);$btn_Cancelar_Modificar_Empleado.option("visible",!1);$btn_Busca_Avanzada_Empleado.option("disabled",!1);$Num_Id_Interno.option("disabled",!1);$Num_Id_Externo.option("disabled",!1)},items:[{location:"before",widget:"dxButton",options:{icon:"./images/Icons/seasrchicon.png",text:Globalize.formatMessage("Busca"),
onInitialized:function(c){$btn_Busca_Avanzada_Empleado=c.component},onClick:function(){a.DatosEmpleadosGet=null;a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",{});$("#imgEmpleado").css("background-image","none");$Num_Id_Interno.option("value",null);$Num_Id_Externo.option("value",null);a.BuscaEmpSoloActivos("CargaEmpleado")}}},{location:"before",template:function(){return $("<div class='toolbar-label'><b>ID:</div>")}},{location:"before",widget:"dxNumberBox",options:{width:90,
min:0,onInitialized:function(c){$Num_Id_Interno=c.component},onEnterKey:function(c){a.DatosEmpleadosGet=null;a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",{});$("#imgEmpleado").css("background-image","none");$Num_Id_Externo.option("value",0);0==$Num_Id_Interno.option("value")||null==$Num_Id_Interno.option("value")?DevExpress.ui.notify("Ingrese un valor en el campo de ID!!!"):(c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),
EMPLEADO_CSC_EMPLEADO:$Num_Id_Interno.option("value")},a.BuscaEmpleados(c))},buttons:[{name:"btn_BuscarEmpleadoID",location:"after",options:{stylingMode:"Contained",icon:"search",type:"normal",readOnly:!1,onClick(c){a.DatosEmpleadosGet=null;a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",{});$("#imgEmpleado").css("background-image","none");$Num_Id_Externo.option("value",0);0==$Num_Id_Interno.option("value")||null==$Num_Id_Interno.option("value")?DevExpress.ui.notify("Ingrese un valor en el campo de ID!!!"):
(c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:$Num_Id_Interno.option("value")},a.BuscaEmpleados(c))}}}]}},{location:"before",template:function(){return $("<div class='toolbar-label'><b>"+Globalize.formatMessage("NoEmp")+":</div>")}},{location:"before",widget:"dxTextBox",options:{width:90,onInitialized:function(c){$Num_Id_Externo=c.component},onEnterKey:function(c){a.Frm_Datos_Empleado.resetValues();
a.Frm_Datos_Empleado.option("formData",{});$("#imgEmpleado").css("background-image","none");$Num_Id_Interno.option("value",0);0==$Num_Id_Externo.option("value")||null==$Num_Id_Externo.option("value")?DevExpress.ui.notify(`Ingrese un valor en el campo de  ${Globalize.formatMessage("NoEmp")}`):(c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_ID_EXTERNO:$Num_Id_Externo.option("value")},
a.BuscaEmpleados(c))},buttons:[{name:"btn_BuscarEmpleadoNomina",location:"after",options:{stylingMode:"Contained",icon:"search",type:"normal",readOnly:!1,onClick(c){a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",{});$("#imgEmpleado").css("background-image","none");$Num_Id_Interno.option("value",0);0==$Num_Id_Externo.option("value")||null==$Num_Id_Externo.option("value")?DevExpress.ui.notify(`Ingrese un valor en el campo de  ${Globalize.formatMessage("NoEmp")}`):(c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),
Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_ID_EXTERNO:$Num_Id_Externo.option("value")},a.BuscaEmpleados(c))}}}]}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"plus",text:"Alta",type:"default",onInitialized:function(c){$btn_Alta_Empleado=c.component},onClick(){g.show();$btn_Alta_Empleado.option("visible",!1);$btn_Modificar_Empleado.option("visible",!1);$btn_Cancelar_Alta_Empleado.option("visible",!0);$btn_Salvar_Alta_Empleado.option("visible",
!0);$btn_Busca_Avanzada_Empleado.option("disabled",!0);$Num_Id_Interno.option("disabled",!0);$Num_Id_Externo.option("disabled",!0);$("#imgEmpleado").css("background-image","none");a.setDefaultValues=!0;a.onBarraClickAlta();a.Switch_Boton_Buscar_codigo_postal();g.hide()}}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"save",text:"Salvar",type:"success",onInitialized:function(c){$btn_Salvar_Alta_Empleado=c.component},onClick(){g.show();$btn_Salvar_Alta_Empleado.option("disabled",
!0);a.onClickAlta_Empleado();$("#imgEmpleado").css("background-image","none")}}},{location:"after",widget:"dxButton",locateInMenu:"auto",options:{icon:"clear",text:"Cancelar",type:"danger",onInitialized:function(c){$btn_Cancelar_Alta_Empleado=c.component},onClick(){g.show();$btn_Alta_Empleado.option("visible",!0);$btn_Modificar_Empleado.option("visible",!0);$btn_Cancelar_Alta_Empleado.option("visible",!1);$btn_Salvar_Alta_Empleado.option("visible",!1);a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",
{});a.Frm_Datos_Empleado.option("readOnly",!0);$btn_Busca_Avanzada_Empleado.option("disabled",!1);$Num_Id_Interno.option("disabled",!1);$Num_Id_Externo.option("disabled",!1);$("#imgEmpleado").css("background-image","none");a.Switch_Boton_Buscar_codigo_postal();g.hide()}}},{location:"after",widget:"dxButton",locateInMenu:"auto",options:{icon:"edit",text:"Modificar",type:"normal",onInitialized:function(c){$btn_Modificar_Empleado=c.component},onClick(){g.show();null==a.DatosEmpleadosGet?DevExpress.ui.notify({message:"No ha seleccionado un empleado",
minWidth:150,type:"info",displayTime:5E3},{position:"bottom right",direction:"up-push"}):($btn_Modificar_Empleado.option("visible",!1),$btn_Alta_Empleado.option("visible",!1),$btn_Salvar_Modifica_Empleado.option("visible",!0),$btn_Cancelar_Modificar_Empleado.option("visible",!0),$btn_Busca_Avanzada_Empleado.option("disabled",!0),$Num_Id_Interno.option("disabled",!0),$Num_Id_Externo.option("disabled",!0),a.setDefaultValues=!0,a.Frm_Datos_Empleado.option("readOnly",!1),a.Frm_Datos_Empleado.getEditor("NOMBRE_JEFE_INMEDIATO").option("buttons[0].options.disabled",
!1),a.Switch_Boton_Buscar_codigo_postal());g.hide()}}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"refresh",text:"Actualizar",type:"success",onInitialized:function(c){$btn_Salvar_Modifica_Empleado=c.component},onClick(){a.ActualizaDatosEmpleado()}}},{location:"after",widget:"dxButton",locateInMenu:"auto",options:{icon:"clearsquare",text:"Cancelar",type:"danger",onInitialized:function(c){$btn_Cancelar_Modificar_Empleado=c.component},onClick(){g.show();$btn_Modificar_Empleado.option("visible",
!0);$btn_Alta_Empleado.option("visible",!0);$btn_Salvar_Modifica_Empleado.option("visible",!1);$btn_Cancelar_Modificar_Empleado.option("visible",!1);a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",{});var c=JSON.stringify(a.DatosEmpleadosGet);a.DatosEmpleadosGet=JSON.parse(c);a.Frm_Datos_Empleado.updateData(a.DatosEmpleadosGet);a.Frm_Datos_Empleado.option("readOnly",!0);$btn_Busca_Avanzada_Empleado.option("disabled",!1);$Num_Id_Interno.option("disabled",!1);$Num_Id_Externo.option("disabled",
!1);a.Switch_Boton_Buscar_codigo_postal();g.hide();c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_UNIQUE_ID:a.DatosEmpleadosGet.EMPLEADO_UNIQUE_ID};a.BuscaEmpleados(c,"CargaDatos")}}}]}).dxToolbar("instance");a.Frm_Datos_Empleado=$("#dxFrmDetEmp").dxForm({readOnly:!0,showColonAfterLabel:!0,showValidationSummary:!1,validationGroup:"Validacion_Frm_",colCount:4,labelMode:"static",
labelLocation:"top",items:[{itemType:"group",colCount:8,colSpan:4,cssClass:"hidden_box",items:[{dataField:"EMPLEADO_UNIQUE_ID",label:{text:"EMPLEADO UNIQUE ID"},editorType:"dxTextBox",colSpan:4,editorOptions:{readOnly:!0,valueChangeEvent:"keyup"},validationRules:[{type:"required",message:"requerido"},{type:"stringLength",max:50,message:"Maximo 50 caractres"}]}]},{itemType:"group",colCount:8,colSpan:2,items:[{colSpan:8,template:"<div class='heading_InnerFrmForms'>\n                    <div class='div__img'>\n                      <img src='./images/Icons/Student-id-icon64.png' /> \n                    </div> \n                    <h2>Informaci\u00f3n Personal</h2>\n                  </div>"},
{itemType:"group",colSpan:8,colCount:8,cssClass:"border_conteiner_empleado",items:[{dataField:"EMPLEADO_CSC_EMPLEADO",label:{text:"Id"},editorType:"dxNumberBox",colSpan:4,editorOptions:{readOnly:!0}},{dataField:"EMPLEADO_ID_EXTERNO",label:{text:Globalize.formatMessage("NoEmp")},editorType:"dxTextBox",colSpan:4,editorOptions:{valueChangeEvent:"change",onValueChanged:function(c){null!=c.value&&""!=c.value&&null==a.DatosEmpleadosGet&&(console.log(c.value),c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),
Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_ID_EXTERNO:c.value,ESTATUS_PROCESO_EMP_CSC:2,TIPO_CONSULTA:"AVANZADO"},a.BuscaEmpleados(c,"Validacion").then(b=>{console.log(b);1==b&&DevExpress.ui.dialog.custom({title:Globalize.formatMessage("_lbl_title_confirma_cancel"),messageHtml:"<div style='text-align:center'> <img src='../../images/AsisVritual_Warning.svg' width='120'> <br> <i>"+Globalize.formatMessage("_lbl_confrma_cancel")+"</i></div>",
buttons:[{text:"Entendido",onClick:function(){$btn_Alta_Empleado.option("visible",!0);$btn_Modificar_Empleado.option("visible",!0);$btn_Cancelar_Alta_Empleado.option("visible",!1);$btn_Salvar_Alta_Empleado.option("visible",!1);a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",{});a.Frm_Datos_Empleado.option("readOnly",!0);$btn_Salvar_Modifica_Empleado.option("visible",!1);$btn_Cancelar_Modificar_Empleado.option("visible",!1);$btn_Busca_Avanzada_Empleado.option("disabled",!1);
$Num_Id_Interno.option("disabled",!1);$Num_Id_Externo.option("disabled",!1);a.Switch_Boton_Buscar_codigo_postal();return!0}}]}).show()}))}},validationRules:[{type:"stringLength",min:1,message:"Minimo 1 caracteres"},{type:"required",message:"requerido"},{type:"stringLength",max:50,message:"Maximo 50 caractres"}]},{dataField:"EMPLEADO_NOMBREEMPLEADO",label:{text:"Nombre(s)"},editorType:"dxTextBox",colSpan:4,editorOptions:{valueChangeEvent:"keyup",onValueChanged:function(c){null!=c.value&&""!=c.value&&
c.component.option("value",c.value.toUpperCase())}},validationRules:[{type:"stringLength",min:1,message:"Minimo 1 caracteres"},{type:"required",message:"requerido"},{type:"stringLength",max:50,message:"Maximo 50 caractres"}]},{dataField:"EMPLEADO_APATERNOEMPLEADO",label:{text:"A. Paterno"},editorType:"dxTextBox",colSpan:4,editorOptions:{valueChangeEvent:"keyup",onValueChanged:function(c){null!=c.value&&""!=c.value&&c.component.option("value",c.value.toUpperCase())}},validationRules:[{type:"stringLength",
min:1,message:"Minimo 1 caracteres"},{type:"required",message:"requerido"},{type:"stringLength",max:50,message:"Maximo 50 caractres"}]},{dataField:"EMPLEADO_AMATERNOEMPLEADO",label:{text:"A. Materno"},editorType:"dxTextBox",colSpan:4,editorOptions:{valueChangeEvent:"keyup",onValueChanged:function(c){null!=c.value&&""!=c.value&&c.component.option("value",c.value.toUpperCase())}},validationRules:[{type:"stringLength",min:1,message:"Minimo 1 caracteres"},{type:"required",message:"requerido"},{type:"stringLength",
max:50,message:"Maximo 50 caractres"}]},{dataField:"EMPLEADO_RFC",label:{text:"R.F.C."},editorType:"dxTextBox",colSpan:4,editorOptions:{valueChangeEvent:"keyup",onValueChanged:function(c){null!=c.value&&""!=c.value&&c.component.option("value",c.value.toUpperCase())}},validationRules:[{type:"required",message:"requerido"},{type:"stringLength",max:20,message:"Maximo 20 caractres"},{type:"stringLength",min:10,message:"Minimo 10 caractres"}]},{colSpan:8,dataField:"EMPLEADO_TELEFONO1",editorType:"dxNumberBox",
label:{text:"Tel\u00e9fono"},editorOptions:{},validationRules:[{type:"required",message:"requerido"}]}]},{colSpan:8,template:"<div class='heading_InnerFrmForms' style='margin-top: -6px; margin-bottom: 3px;' >\n                    <div class='div__img'>\n                      <img src='./images/Icons/icono_30.png' />\n                    </div>\n                    <h2>Datos laborales</h2>\n                  </div>"},{itemType:"group",colSpan:8,colCount:8,cssClass:"border_conteiner_empleado",items:[{colSpan:8,
editorType:"dxSelectBox",dataField:"EMPRESA_LABORAL_CSC",label:{text:"Empresa laboral"},editorOptions:{searchEnabled:!1,displayExpr:"EMPRESA_LABORAL_RAZONSOCIALNOMBRE",valueExpr:"EMPRESA_LABORAL_CSC",dataSource:new DevExpress.data.DataSource({loadMode:"raw",paginate:!1,load:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_EMPRESA_LABORAL"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}},
onError:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_EMPRESA_LABORAL"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}}}),onOpened:function(c){var b=c.component.getDataSource().items(),d=setInterval(()=>{b=c.component.getDataSource().items();if(0!=b.length&&(clearInterval(d),a.EMPRESA_LABORAL_CSC=b,0==a.LoadCatFull)){var e=jslinq(b).where(function(f){return 1==
f.EMPRESA_LABORAL_ACTIVO}).toList();c.component.option("dataSource",e)}},1)},onClosed:function(c){c.component.option("dataSource",a.EMPRESA_LABORAL_CSC)},onValueChanged:function(c){}},validationRules:[{type:"required",message:"Campo requerido"}]},{colSpan:8,editorType:"dxTextBox",dataField:"EMPLEADO_EMAILLABORAL",label:{text:"Correo laboral"},editorOptions:{valueChangeEvent:"keyup"},validationRules:[{type:"required",message:"Campo requerido"},{type:"email",message:"Correo invalido"},{type:"stringLength",
max:50,message:"Maximo 50 caractres"}]},{colSpan:8,editorType:"dxDateBox",dataField:"EMPLEADO_FECH_INGRESOEMP",label:{text:"Fecha de ingreso"},editorOptions:{acceptCustomValue:!1,adaptivityEnabled:!0,pickerType:"rollers",type:"datetime",placeholder:"DD/MM/AAAA",displayFormat:"dd/MM/yyyy",dateSerializationFormat:"yyyy-MM-dd"},validationRules:[{type:"required",message:"requerido"}]},{colSpan:8,editorType:"dxSelectBox",dataField:"REQ_CSCREQUISICION",label:{text:"Ubicaci\u00f3n laboral"},editorOptions:{searchEnabled:!1,
displayExpr:"REQ_NOMBREAREA",valueExpr:"REQ_CSCREQUISICION",dataSource:new DevExpress.data.DataSource({loadMode:"raw",paginate:!1,load:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_REQUISICIONES"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}},onError:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full",
"GET",{Tbl:"SAMT_REQUISICIONES"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}}}),onOpened:function(c){var b=c.component.getDataSource().items(),d=setInterval(()=>{b=c.component.getDataSource().items();if(0!=b.length&&(clearInterval(d),a.EMPLEADO_SITE_CSC=b,0==a.LoadCatFull)){var e=jslinq(b).where(function(f){return 1==f.ESTATUS_REQUISICION_CSC}).toList();c.component.option("dataSource",e)}},1)},onClosed:function(c){c.component.option("dataSource",
a.EMPLEADO_SITE_CSC)},onValueChanged:function(c){}},validationRules:[{type:"required",message:"requerido"}]},{colSpan:8,editorType:"dxSelectBox",dataField:"TIPO_UBICACION_LABORAL_CSC",label:{text:"\u00c1mbito laboral"},editorOptions:{searchEnabled:!1,displayExpr:"TIPO_UBICACION_IDIOMA1",valueExpr:"TIPO_UBICACION_LABORAL_CSC",dataSource:new DevExpress.data.DataSource({loadMode:"raw",paginate:!1,load:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",
{Tbl:"SAMT_TIPO_UBICACION_LABORAL"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}},onError:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_TIPO_UBICACION_LABORAL"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}}}),onOpened:function(c){var b=c.component.getDataSource().items(),
d=setInterval(()=>{b=c.component.getDataSource().items();if(0!=b.length&&(clearInterval(d),a.TIPO_UBICACION_LABORAL_CSC=b,0==a.LoadCatFull)){var e=jslinq(b).where(function(f){return 1==f.TIPO_UBICACION_ACTIVO}).toList();c.component.option("dataSource",e)}},1)},onClosed:function(c){c.component.option("dataSource",a.TIPO_UBICACION_LABORAL_CSC)},onValueChanged:function(c){}},validationRules:[{type:"required",message:"requerido"}]},{colSpan:4,editorType:"dxSelectBox",dataField:"CAT_AREA_CSC",label:{text:"Direccion"},
editorOptions:{searchEnabled:!1,displayExpr:"TIPO_AREA_IDIOMA1",valueExpr:"TIPO_AREA_CSC",dataSource:new DevExpress.data.DataSource({loadMode:"raw",paginate:!1,load:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CAT_EMPLEADO_AREA"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}},onError:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+
"Get_Cat_Full","GET",{Tbl:"SAMT_CAT_EMPLEADO_AREA"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}}}),onOpened:function(c){var b=c.component.getDataSource().items(),d=setInterval(()=>{b=c.component.getDataSource().items();if(0!=b.length&&(clearInterval(d),a.SAMT_CAT_EMPLEADO_AREA_CSC=b,0==a.LoadCatFull)){var e=jslinq(b).where(function(f){return 1==f.TIPO_AREA_ACTIVO}).toList();c.component.option("dataSource",e)}},
1)},onClosed:function(c){c.component.option("dataSource",a.SAMT_CAT_EMPLEADO_AREA_CSC)},onValueChanged:function(c){}},validationRules:[{type:"required",message:"requerido"}]},{colSpan:4,editorType:"dxSelectBox",dataField:"TIPO_PERFIL_CSC",label:{text:"Puesto"},editorOptions:{searchEnabled:!1,displayExpr:"SAMT_TIPO_PERFIL_IDIOMA1",valueExpr:"SAMT_CSC_PERFIL",dataSource:new DevExpress.data.DataSource({loadMode:"raw",paginate:!1,load:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+
"Get_Cat_Full","GET",{Tbl:"SAMT_TIPO_EMPLEADO_PERFIL"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}},onError:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_TIPO_EMPLEADO_PERFIL"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}}}),onOpened:function(c){var b=c.component.getDataSource().items(),
d=setInterval(()=>{b=c.component.getDataSource().items();if(0!=b.length&&(clearInterval(d),a.TIPO_PERFIL_CSC=b,0==a.LoadCatFull)){var e=jslinq(b).where(function(f){return 1==f.SAMT_TIPO_PERFIL_ACTIVO}).toList();c.component.option("dataSource",e)}},1)},onClosed:function(c){c.component.option("dataSource",a.TIPO_PERFIL_CSC)},onValueChanged:function(c){}},validationRules:[{type:"required",message:"Campo requerido"}]},{colSpan:8,editorType:"dxSelectBox",dataField:"TIPO_TURNO_CSCTURNO",label:{text:"Turno"},
editorOptions:{searchEnabled:!1,displayExpr:"TIPO_TURNO_IDIOMA1",valueExpr:"TIPO_TURNO_CSCTURNO",dataSource:new DevExpress.data.DataSource({loadMode:"raw",paginate:!1,load:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_TIPO_TURNO_EMPLEADOS"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}},onError:async function(c){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+
"Get_Cat_Full","GET",{Tbl:"SAMT_TIPO_TURNO_EMPLEADOS"},getJSON(DeveloperType).ApiGeneral.token).then(b=>{if(1==b.success)return b.JsonData;console.log(b.message)})}catch(b){console.log(b)}}}),onOpened:function(c){var b=c.component.getDataSource().items(),d=setInterval(()=>{b=c.component.getDataSource().items();if(0!=b.length&&(clearInterval(d),a.TIPO_TURNO_CSCTURNO=b,0==a.LoadCatFull)){var e=jslinq(b).where(function(f){return 1==f.TIPO_TURNO_ACTIVO}).toList();c.component.option("dataSource",e)}},
1)},onClosed:function(c){c.component.option("dataSource",a.TIPO_TURNO_CSCTURNO)}}},{colSpan:3,editorType:"dxNumberBox",dataField:"EMPLEADO_CSC_EMPLEADO_PADRE",label:{text:"Id Administrador de contrato"},editorOptions:{readOnly:!0}},{colSpan:5,editorType:"dxTextBox",dataField:"NOMBRE_JEFE_INMEDIATO",label:{text:"Administrador de contrato"},editorOptions:{readOnly:!0,buttons:[{name:"btn_BuscarEmpleado",location:"after",options:{stylingMode:"Contained",icon:"search",type:"normal",readOnly:!1,onClick(c){a.BuscaEmpSoloActivos("JefeInmediato")}}}]}}]}]},
{itemType:"group",colCount:8,colSpan:2,items:[{colSpan:8,template:"<div class='heading_InnerFrmForms'>\n                    <div class='div__img'>\n                      <img src='./images/Icons/Card-file-icon64.png' />\n                    </div>\n                    <h2>Proceso Operativo</h2>\n                    </div>"},{itemType:"group",colSpan:8,colCount:8,cssClass:"border_conteiner_empleado",items:[{dataField:"CAT_PROCESO_EMP_CSC",label:{text:"Proceso"},editorType:"dxSelectBox",colSpan:4,editorOptions:{searchEnabled:!1,
displayExpr:"CAT_PROCESO_EMP_IDIOMA1",valueExpr:"CAT_PROCESO_EMP_CSC",dataSource:a._Cmb_Proceso_ObjData,onOpened:function(c){var b=c.component.getDataSource().items(),d=setInterval(()=>{b=c.component.getDataSource().items();if(0!=b.length&&(clearInterval(d),a.CAT_PROCESO_EMP_CSC=b,0==a.LoadCatFull)){var e=jslinq(b).where(function(f){return 1==f.CAT_PROCESO_EMP_ACTIVO}).toList();c.component.option("dataSource",e)}},1)},onClosed:function(c){c.component.option("dataSource",a.CAT_PROCESO_EMP_CSC)},onValueChanged:function(c){var b=
c.value;c=a.Frm_Datos_Empleado.getEditor("CAT_SUBPROCESO_EMP_CSC");const d=a.Frm_Datos_Empleado.getEditor("ESTATUS_PROCESO_EMP_CSC"),e=a.Frm_Datos_Empleado.getEditor("EMPLEADO_FECH_CAMBIO_PROCESO");c.option("value",null);d.option("value",null);e.option("value",null);b=(new DevExpress.data.query(a._Cmb_SubProceso_ObjData._array)).filter(["CAT_PROCESO_EMP_CSC","=",b]).sortBy("CAT_SUBPROCESO_EMP_ORDEN").toArray();c.option("dataSource",b)}},validationRules:[{type:"required",message:"requerido"}]},{dataField:"CAT_SUBPROCESO_EMP_CSC",
label:{text:"Sub Proceso"},editorType:"dxSelectBox",colSpan:4,editorOptions:{searchEnabled:!1,displayExpr:"CAT_SUBPROCESO_EMP_IDIOMA1",valueExpr:"CAT_SUBPROCESO_EMP_CSC",dataSource:a._Cmb_SubProceso_ObjData,onOpened:function(c){var b=c.component.getDataSource().items();a.CAT_SUBPROCESO_EMP_CSC=b;0==a.LoadCatFull&&(b=jslinq(b).where(function(d){return 1==d.CAT_SUBPROCESO_EMP_ACTIVO}).toList(),c.component.option("dataSource",b))},onClosed:function(c){c.component.option("dataSource",a.CAT_SUBPROCESO_EMP_CSC)},
onValueChanged:function(c){null!=c.value&&(c.component.option("selectedItem"),a.Frm_Datos_Empleado.getEditor("CAT_SUBPROCESO_EMP_CSC"),a.Frm_Datos_Empleado.getEditor("ESTATUS_PROCESO_EMP_CSC"),a.Frm_Datos_Empleado.getEditor("EMPLEADO_FECH_CAMBIO_PROCESO"),a.Frm_Datos_Empleado.getEditor("EMPLEADO_FECH_BAJAEMPLEADO"),c=c.component.option("selectedItem"),null!=c&&(a.Frm_Datos_Empleado.getEditor("ESTATUS_PROCESO_EMP_CSC").option("value",c.CAT_ESTATUS_PROCESO_EMP_CSC),a.Frm_Datos_Empleado.getEditor("EMPLEADO_FECH_CAMBIO_PROCESO").option("value",
moment().tz(a.TimeZoneEmpleado).format("YYYY-MM-DD HH:mm:ss")),"BAJA"==c.CAT_SUBPROCESO_EMP_CLAVE.trim()?(a.Frm_Datos_Empleado.itemOption("tabbed.CAT_EMP_TREE_BAJA_CSC","isRequired",!0),a.Frm_Datos_Empleado.itemOption("tabbed.EMPLEADO_FECH_BAJAEMPLEADO","isRequired",!0),a.Frm_Datos_Empleado.getEditor("CAT_EMP_TREE_BAJA_CSC").option("disabled",!1),a.Frm_Datos_Empleado.getEditor("EMPLEADO_FECH_BAJAEMPLEADO").option("disabled",!1)):(a.Frm_Datos_Empleado.itemOption("tabbed.CAT_EMP_TREE_BAJA_CSC","isRequired",
!1),a.Frm_Datos_Empleado.itemOption("tabbed.EMPLEADO_FECH_BAJAEMPLEADO","isRequired",!1),a.Frm_Datos_Empleado.getEditor("CAT_EMP_TREE_BAJA_CSC").option("disabled",!0),a.Frm_Datos_Empleado.getEditor("EMPLEADO_FECH_BAJAEMPLEADO").option("disabled",!0))))}},validationRules:[{type:"required",message:"requerido"}]},{dataField:"ESTATUS_PROCESO_EMP_CSC",label:{text:"Estatus"},editorType:"dxSelectBox",colSpan:4,editorOptions:{readOnly:!0,searchEnabled:!1,dataSource:a._Cmb_Estatus_Empl_ObjData,displayExpr:"CAT_ESTATUS_PROCESO_EMP_IDIOMA1",
valueExpr:"CAT_ESTATUS_PROCESO_EMP_CSC"}},{dataField:"EMPLEADO_FECH_CAMBIO_PROCESO",label:{text:"Fecha sub proceso"},editorType:"dxDateBox",colSpan:4,editorOptions:{readOnly:!0,type:"datetime",placeholder:"DD/MM/AAAA HH:mm:ss",displayFormat:"dd/MM/yyyy HH:mm:ss"}}]},{colSpan:8,template:"<div class='heading_InnerFrmForms' style='margin-top: -6px; margin-bottom: 3px;' >\n                    <div class='div__img'>\n                      <img src='./images/Icons/ubicacion.png' />\n                    </div>\n                    <h2>Direcci\u00f3n</h2>\n                  </div>"},
{itemType:"group",colSpan:8,colCount:8,cssClass:"border_conteiner_empleado",items:[{colSpan:4,editorType:"dxSelectBox",dataField:"EMPLEADO_DIRECCION_PAIS_CSCPAIS",label:{text:"Pa\u00eds"},editorOptions:{searchEnabled:!1,displayExpr:"country_name",valueExpr:"PAI_CSCPAIS_DNA",dataSource:a._CountryCodes_ObjData,onValueChanged:function(c){var b=c.value;c=c.component.option("selectedItem");null!=c&&(a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_EDO_CSCESTADO").option("value",null),b={PAI_CSCPAIS:b},
__Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Estados_Adress","GET",b,getJSON(DeveloperType).ApiGeneral.token).then(d=>{1==d.success?a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_EDO_CSCESTADO").option("dataSource",d.JsonData):a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_EDO_CSCESTADO").option("dataSource",[])}),b=a.Frm_Datos_Empleado.getEditor("EMPLEADO_ZONA_HORARIA_CLAVE"),b.option("value",null),c=(new DevExpress.data.query(a._TimeZones_ObjData._array)).filter(["country_code",
"=",c.country_code]).sortBy("country_name").toArray(),b.option("dataSource",c));a.Switch_Boton_Buscar_codigo_postal()}},validationRules:[{type:"required",message:"requerido"}]},{colSpan:4,editorType:"dxSelectBox",dataField:"EMPLEADO_ZONA_HORARIA_CLAVE",label:{text:"Zona horaria"},editorOptions:{searchEnabled:!1,displayExpr:"timeZoneCode",valueExpr:"timeZoneCode"},onValueChanged:function(c){},validationRules:[{type:"required",message:"requerido"}]},{colSpan:4,editorType:"dxTextBox",dataField:"EMPLEADO_DIRECCION_CODIGOPOSTAL",
label:{text:"C.P."},editorOptions:{valueChangeEvent:"keyup",buttons:[{name:"btn_Buscar_cp",location:"after",options:{stylingMode:"Contained",icon:"search",type:"default",text:"Buscar",disabled:!0,onInitialized:function(c){$Btn_buscar_codigo_postal=c.component},onClick(c){c=a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_CODIGOPOSTAL").option("value");null!==c?5===c.length?(g.show(),c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),
SFP_SOLICITUD_CP:c},__Reques_ajax(getJSON(DeveloperType).ApiGeneral.url+"Get_CP_Adress","GET",c,getJSON(DeveloperType).ApiGeneral.token).then(b=>{1==b.success?(g.hide(),1==b.count?(b=b.JsonData[0],a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_EDO_CSCESTADO").option("value",b.ID_ESTADO),a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_MUNICIPIO").option("value",b.MUNICIPIO),a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_COLONIA").option("value",b.COLONIA)):(a._Pop_Colonias_Codigo_Postal.show(),
$("#Datagrid_Colonias_Codigo_Postal").dxDataGrid("instance").option("dataSource",b.JsonData))):(g.hide(),DevExpress.ui.notify("CODIGO POSTAL NO ENCONTRADO","error",3E3),console.log(b.message))})):DevExpress.ui.notify("EL CODIGO POSTAL NO ES VALIDO","error",3E3):DevExpress.ui.notify("EL CODIGO POSTAL NO ES VALIDO","error",3E3)}}}]},validationRules:[{type:"stringLength",max:5,message:"Maximo 5 caractres"}]},{colSpan:4,editorType:"dxSelectBox",dataField:"EMPLEADO_DIRECCION_EDO_CSCESTADO",label:{text:"Estado"},
editorOptions:{searchEnabled:!1,displayExpr:"EDO_DESCESTADO",valueExpr:"EDO_CSCESTADO"}},{colSpan:4,editorType:"dxTextBox",dataField:"EMPLEADO_DIRECCION_MUNICIPIO",label:{text:"Del/Municipio"},editorOptions:{valueChangeEvent:"keyup"},validationRules:[{type:"stringLength",max:50,message:"Maximo 50 caractres"}]},{editorType:"dxTextBox",colSpan:4,dataField:"EMPLEADO_DIRECCION_COLONIA",label:{text:"Colonia"},editorOptions:{valueChangeEvent:"keyup"},validationRules:[{type:"stringLength",max:50,message:"Maximo 50 caractres"}]},
{dataField:"EMPLEADO_DIRECCION_CALLE",label:{text:"Calle"},editorType:"dxTextBox",colSpan:4,editorOptions:{valueChangeEvent:"keyup"},validationRules:[{type:"stringLength",max:200,message:"Maximo 200 caractres"}]},{dataField:"EMPLEADO_DIRECCION_NUMERO_EXT",label:{text:"No. Exterior"},editorType:"dxTextBox",colSpan:2,editorOptions:{valueChangeEvent:"keyup"},validationRules:[{type:"stringLength",max:20,message:"Maximo 20 caractres"}]},{dataField:"EMPLEADO_DIRECCION_NUMERO_INT",label:{text:"No. Interior"},
editorType:"dxTextBox",colSpan:2,editorOptions:{valueChangeEvent:"keyup"},validationRules:[{type:"stringLength",max:20,message:"Maximo 20 caractres"}]}]},{colSpan:8,template:"<div class='heading_InnerFrmForms' style='margin-top: -6px; margin-bottom: 3px;'>\n                    <div class='div__img'>\n                      <img src='./images/Icons/order256.png' />\n                    </div>\n                    <h2>Baja</h2>\n                  </div>"},{itemType:"group",colSpan:8,colCount:8,cssClass:"border_conteiner_empleado",
items:[{colSpan:8,editorType:"dxDropDownBox",dataField:"CAT_EMP_TREE_BAJA_CSC",label:{text:"Causa de baja"},editorOptions:{deferRendering:!1,displayExpr:"EMP_TREE_IDIOMA1",valueExpr:"EMP_TREE_BAJA_CSC",onOpened:function(c){},dataSource:new DevExpress.data.DataSource({loadMode:"raw",key:"EMP_TREE_BAJA_CSC",load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Whr","GET",{Tbl:"SAMT_EMP_TREE_BAJA",WHR:"EMP_TREE_ACTIVO = 1 "},getJSON(DeveloperType).ApiGeneral.token).then(c=>
{if(1==c.success)return c.JsonData;console.log(c.message)})}catch(c){console.log(c)}}}),contentTemplate:function(c){c.component.option("value");var b=$("<div>").dxTreeView({dataSource:c.component.getDataSource(),dataStructure:"plain",autoExpandAll:!0,keyExpr:"EMP_TREE_BAJA_CSC",parentIdExpr:"EMP_TREE_BAJA_PARENT",selectionMode:"single",displayExpr:"EMP_TREE_IDIOMA1",selectByClick:!0,expandEvent:"click",selectNodesRecursive:!1,onContentReady:function(d){var e=d.component;(d=d.component.option("value"))?
e.selectItem(d):e.unselectAll()},onItemSelectionChanged:function(d){0==d.node.children.length?(a.DxDropBoxDxTreeSelectParent=!1,c.component.option("value",d.node.itemData.EMP_TREE_BAJA_CSC)):a.DxDropBoxDxTreeSelectParent=!0}});treeView=b.dxTreeView("instance");c.component.on("valueChanged",d=>{setTimeout(()=>{var e=treeView,f=d.value;f?e.selectItem(f):e.unselectAll();1==a.DxDropBoxDxTreeSelectParent?DevExpress.ui.notify({message:"Seleccione un valor del siguiente nivel",position:{my:"top center",
at:"top center"}},"error",5E3):(a.DxDropBoxDxTreeSelectParent=!1,c.component.close())},500)});return b}}},{colSpan:8,editorType:"dxDateBox",dataField:"EMPLEADO_FECH_BAJAEMPLEADO",label:{text:"Fecha de Baja"},editorOptions:{acceptCustomValue:!1,adaptivityEnabled:!0,pickerType:"rollers",type:"date",placeholder:"DD/MM/AAAA",displayFormat:"dd/MM/yyyy",dateSerializationFormat:"yyyy-MM-dd"}}]}]}]}).dxForm("instance");$("#tooltip_btn_rfc").dxTooltip({target:"#btn_calcula_rfc",showEvent:"mouseenter",hideEvent:"mouseleave",
hideOnOutsideClick:!1});$("#tooltip_btn_select_vacante").dxTooltip({target:"#btn_select_vacante",showEvent:"mouseenter",hideEvent:"mouseleave",hideOnOutsideClick:!1});a.onBarraClickAlta=function(){a.Frm_Datos_Empleado.resetValues();a.Frm_Datos_Empleado.option("formData",{});a.Frm_Datos_Empleado.option("readOnly",!1);a.LoadCatFull=!1;a.Frm_Datos_Empleado.getEditor("NOMBRE_JEFE_INMEDIATO").option("buttons[0].options.disabled",!1);a.Frm_Datos_Empleado.getEditor("EMPLEADO_UNIQUE_ID").option("value",createUUID(36));
a.DatosEmpleadosGet=null};a.onClickAlta_Empleado=function(){g.show();var c=moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss");if(!0===a.Frm_Datos_Empleado.validate().isValid){var b={},d=a.Frm_Datos_Empleado.option("formData"),e;for(e in d)d[e]&&(b[e]=d[e]);b.AUDITORIA_USU_ALTA=h.EMPLEADO_CSC_EMPLEADO;b.AUDITORIA_USU_ULT_MOD=h.EMPLEADO_CSC_EMPLEADO;b.EMP_CSC_EMPRESA_HOST=localStorage.getItem("EMP_CSC_EMPRESA_HOST");b.AUDITORIA_FEC_ALTA=c;b.AUDITORIA_FEC_ULT_MOD=c;b.EMPLEADO_CVEESTATUS=1;
b.EMPLEADO_FECH_CAMBIO_PROCESO&&(b.EMPLEADO_FECH_CAMBIO_PROCESO=moment(b.EMPLEADO_FECH_CAMBIO_PROCESO).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss"));b.EMPLEADO_FECH_FIRMACONTRATO&&(b.EMPLEADO_FECH_FIRMACONTRATO=moment(b.EMPLEADO_FECH_FIRMACONTRATO).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss"));b.EMPLEADO_FECH_CAPACITACION&&(b.EMPLEADO_FECH_CAPACITACION=moment(b.EMPLEADO_FECH_CAPACITACION).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss"));
b.EMPLEADO_FECH_INICIAOPERACION&&(b.EMPLEADO_FECH_INICIAOPERACION=moment(b.EMPLEADO_FECH_INICIAOPERACION).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss"));b.EMPLEADO_FECH_REINGRESO&&(b.EMPLEADO_FECH_REINGRESO=moment(b.EMPLEADO_FECH_REINGRESO).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss"));delete b.NOMBRE_JEFE_INMEDIATO;c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),
DATA_INSERT:b};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Empleado","POST",JSON.stringify(c),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async f=>{if(1==f.success){console.log(f);DevExpress.ui.notify({message:"Empleado insertado correctamente",minWidth:150,type:"success",displayTime:5E3},{position:"bottom right",direction:"up-push"});$btn_Alta_Empleado.option("visible",!0);$btn_Modificar_Empleado.option("visible",!0);$btn_Salvar_Alta_Empleado.option("visible",!1);
$btn_Salvar_Modifica_Empleado.option("visible",!1);$btn_Cancelar_Alta_Empleado.option("visible",!1);$btn_Cancelar_Modificar_Empleado.option("visible",!1);$btn_Busca_Avanzada_Empleado.option("disabled",!1);$Num_Id_Interno.option("disabled",!1);$Num_Id_Externo.option("disabled",!1);a.Frm_Datos_Empleado.option("readOnly",!0);a.Switch_Boton_Buscar_codigo_postal();await new Promise(function(u,l){var m=$("#dxFrmDetEmp").dxForm("instance").getEditor("CAT_PROCESO_EMP_CSC").option("selectedItem"),n=$("#dxFrmDetEmp").dxForm("instance").getEditor("CAT_SUBPROCESO_EMP_CSC").option("selectedItem"),
p=$("#dxFrmDetEmp").dxForm("instance").getEditor("ESTATUS_PROCESO_EMP_CSC").option("selectedItem"),t="ACT"==p.CAT_ESTATUS_PROCESO_EMP_CLAVE?0:1;t={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:f.JsonData,PROCESO_BAJA_EMPLEADO:t,EMPLEADO_ALTA:h.EMPLEADO_CSC_EMPLEADO};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"UpdateFinalizaBitacoraDateProceso","POST",
JSON.stringify(t),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async function(r){r=void 0==b.CAM_CSC_SERVICIO||null==b.CAM_CSC_SERVICIO?0:b.CAM_CSC_SERVICIO;var v=void 0==b.EMPLEADO_CSC_EMPLEADO_PADRE||null==b.EMPLEADO_CSC_EMPLEADO_PADRE?0:b.EMPLEADO_CSC_EMPLEADO_PADRE;r={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),DATA_INSERT:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:f.JsonData,CAM_CSC_SERVICIO:r,
CAT_PROCESO_EMP_CSC:m.CAT_PROCESO_EMP_CSC,CAT_SUBPROCESO_EMP_CSC:n.CAT_SUBPROCESO_EMP_CSC,CAT_ESTATUS_PROCESO_EMP_CSC:p.CAT_ESTATUS_PROCESO_EMP_CSC,PROCESO_FECHA_INICIO:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),RESPONSABLE_EMPLEADO_CSC:v,AUDITORIA_USU_ALTA:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ALTA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")}};
__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Empleado_Proceso_Detalle","POST",JSON.stringify(r),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async w=>{u("resolve")}).catch(function(w){console.log(w);l("reject")})}).catch(function(r){console.log(r);l("reject")})});var k={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_UNIQUE_ID:a.Frm_Datos_Empleado.option("formData").EMPLEADO_UNIQUE_ID};
a.BuscaEmpleados(k,"CargaDatos");$btn_Salvar_Alta_Empleado.option("disabled",!1)}g.hide()}).catch(function(f){console.log(f);g.hide();DevExpress.ui.notify({message:"Error en comunicaci\u00f3n con servidores",minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"})})}else $btn_Salvar_Alta_Empleado.option("disabled",!1),g.hide(),DevExpress.ui.notify({message:"Llene los campos en rojo",minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"})};
a.onClickActualiza_Empleado=function(){};a.BuscaEmpleados=function(c,b="CargaDatos"){c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),Type:localStorage.getItem("Type"),...c};return __Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"GetEmpleado","GET",c,getJSON(DeveloperType).ApiRecursosHumanos.token).then(d=>{if(1==d.success){if("Validacion"==b)return!0;var e=null;e=2<=d.JsonData.length?jslinq(d.JsonData).orderByDescending(function(f){return f.AUDITORIA_FEC_ALTA}).toList()[0]:
d.JsonData[0];e.EMPLEADO_FECH_CAMBIO_PROCESO&&(e.EMPLEADO_FECH_CAMBIO_PROCESO=moment(e.EMPLEADO_FECH_CAMBIO_PROCESO).add(a.TiempoUTCEmpleado,"hours").format("YYYY-MM-DD HH:mm:ss"));e.EMPLEADO_FECH_INGRESOEMP&&(e.EMPLEADO_FECH_INGRESOEMP=moment(e.EMPLEADO_FECH_INGRESOEMP).add(a.TiempoUTCEmpleado,"hours").format("YYYY-MM-DD HH:mm:ss"));e.EMPLEADO_FECH_CAPACITACION&&(e.EMPLEADO_FECH_CAPACITACION=moment(e.EMPLEADO_FECH_CAPACITACION).add(a.TiempoUTCEmpleado,"hours").format("YYYY-MM-DD HH:mm:ss"));e.EMPLEADO_FECH_INICIAOPERACION&&
(e.EMPLEADO_FECH_INICIAOPERACION=moment(e.EMPLEADO_FECH_INICIAOPERACION).add(a.TiempoUTCEmpleado,"hours").format("YYYY-MM-DD HH:mm:ss"));e.EMPLEADO_FECH_REINGRESO&&(e.EMPLEADO_FECH_REINGRESO=moment(e.EMPLEADO_FECH_REINGRESO).add(a.TiempoUTCEmpleado,"hours").format("YYYY-MM-DD HH:mm:ss"));d=JSON.stringify(e);a.DatosEmpleadosGet=JSON.parse(d);a.Frm_Datos_Empleado.updateData(a.DatosEmpleadosGet);d=null==a.DatosEmpleadosGet.EMPLEADO_PATHFOTO?"none":"url(data:image/png;base64,"+toBase64(a.DatosEmpleadosGet.EMPLEADO_PATHFOTO.data)+
")";$("#imgEmpleado").css("background-image",`${d}`);setTimeout(function(){a.Refresh_Empleado_Mapa()},2E3);a.Switch_Boton_Buscar_codigo_postal()}else{if("Validacion"==b)return!1;a.DatosEmpleadosGet=null;a.Frm_Datos_Empleado.updateData({});DevExpress.ui.notify({message:"Empleado no localizado",minWidth:150,type:"info",displayTime:5E3},{position:"bottom right",direction:"up-push"})}}).catch(function(d){console.log(d);DevExpress.ui.notify({message:"Error en comunicaci\u00f3n con servidores",minWidth:150,
type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"})})};a.Run=function(){};a.BuscaEmpSoloActivos=function(c,b){a._Obj_Empleados_Grid_iEmp.clear();a._PopSearchEmpleado.option("title","Buscar Empleado");a._PopSearchEmpleado.option("height","450");a._PopSearchEmpleado.option("width","800");a._PopSearchEmpleado.option("contentTemplate",function(){return $("<div>").append($("<div class='popup-property-details'>").append($("<div/>").attr("id","DataGridEmpleadosBusqueda").dxDataGrid({headerFilter:{visible:!1},
dataSource:a._Obj_Empleados_Grid_iEmp,selection:{mode:b},height:300,filterRow:{visible:!0,applyFilter:"auto"},scrolling:{useNative:!1,scrollByContent:!0,scrollByThumb:!0,showScrollbar:"always"},groupPanel:{visible:!0},grouping:{autoExpandAll:!0},paging:{enabled:!1,pageIndex:0,pageSize:20},hoverStateEnabled:!0,showBorders:!0,showRowLines:!0,showColumnLines:!0,rowAlternationEnabled:!0,columnAutoWidth:!1,columns:[{caption:"NO. DE EMPLEADO",dataField:"EMPLEADO_ID_EXTERNO",alignment:"left",width:120},
{caption:"NOMBRE",dataField:"NOMBRE",sortOrder:"asc",alignment:"left"},{dataField:"ACCIONES",type:"buttons",width:110,buttons:[{text:"Seleccionar",onClick(d){switch(c){case "JefeInmediato":console.log(a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO").option("value"));if(null!=a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO").option("value")){if(d.row.data.EMPLEADO_CSC_EMPLEADO===a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO").option("value")){DevExpress.ui.notify({message:"Acci\u00f3n no permitida - No puede ser Jefe Inmediato de s\u00ed mismo",
minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"});break}if(d.row.data.EMPLEADO_CSC_EMPLEADO_PADRE===a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO").option("value")){DevExpress.ui.notify({message:`Acci\u00f3n no permitida - Es Jefe Inmediato de ${d.row.data.NOMBRE}`,minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"});break}if(d.row.data.EMPLEADO_CSC_EMPLEADO===a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO_PADRE").option("value")){DevExpress.ui.notify({message:`Acci\u00f3n no permitida - ${d.row.data.NOMBRE}, Es el actual Jefe Inmediato`,
minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"});break}}a.Frm_Datos_Empleado.getEditor("NOMBRE_JEFE_INMEDIATO").option("value",d.row.data.NOMBRE);a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO_PADRE").option("value",d.row.data.EMPLEADO_CSC_EMPLEADO);a._PopSearchEmpleado.hide();break;case "CargaEmpleado":d={...ReturnDefaultData_Init(),EMPLEADO_CSC_EMPLEADO:d.row.data.EMPLEADO_CSC_EMPLEADO};a.BuscaEmpleados(d);a._PopSearchEmpleado.hide();break;case "EmpleadoCapacitador":d.row.data.EMPLEADO_CSC_EMPLEADO===
a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO").option("value")?DevExpress.ui.notify({message:"Acci\u00f3n no permitida - No puede capacitarse a s\u00ed mismo",minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"}):a._PopSearchEmpleado.hide()}}}]}],toolbar:{items:[{location:"before",template:function(){return $("<div class='toolbar-label'><b>Proceso*:</div>")}},{location:"before",widget:"dxSelectBox",options:{dataSource:a._Cmb_Proceso_ObjData,displayExpr:"CAT_PROCESO_EMP_IDIOMA1",
valueExpr:"CAT_PROCESO_EMP_CSC",onValueChanged(d){d=d.value;$_cmbSubProcesoSearch.option("value",null);$_cmbEstatusSearch.option("value",null);d=(new DevExpress.data.query(a._Cmb_SubProceso_ObjData._array)).filter(["CAT_PROCESO_EMP_CSC","=",d]).sortBy("CAT_SUBPROCESO_EMP_ORDEN").toArray();$_cmbSubProcesoSearch.option("dataSource",d)},onOpened:function(d){var e=d.component.getDataSource().items();a._tempProceso=e;e=jslinq(e).where(function(f){return 1==f.CAT_PROCESO_EMP_ACTIVO}).toList();d.component.option("dataSource",
e)},onClosed:function(d){d.component.option("dataSource",a._tempProceso)},onInitialized:function(d){$_cmbProcesoSearch=d.component}}},{location:"before",template:function(){return $("<div class='toolbar-label'><b>Sub Proceso*:</div>")}},{location:"before",widget:"dxSelectBox",options:{dataSource:a._Cmb_SubProceso_ObjData,displayExpr:"CAT_SUBPROCESO_EMP_IDIOMA1",valueExpr:"CAT_SUBPROCESO_EMP_CSC",onValueChanged(d){d=d.component.option("selectedItem");null!=d&&$_cmbEstatusSearch.option("value",d.CAT_ESTATUS_PROCESO_EMP_CSC)},
onOpened:function(d){var e=d.component.getDataSource().items();a._tempSubProc=e;e=jslinq(e).where(function(f){return 1==f.CAT_SUBPROCESO_EMP_ACTIVO}).toList();d.component.option("dataSource","JefeInmediato"==c?e:a._tempSubProc)},onClosed:function(d){d.component.option("dataSource",a._tempSubProc)},onInitialized:function(d){$_cmbSubProcesoSearch=d.component}}},{location:"before",template:function(){return $("<div class='toolbar-label'><b>Estatus:</div>")}},{location:"before",widget:"dxSelectBox",options:{dataSource:a._Cmb_Estatus_Empl_ObjData,
displayExpr:"CAT_ESTATUS_PROCESO_EMP_IDIOMA1",valueExpr:"CAT_ESTATUS_PROCESO_EMP_CSC",readOnly:!0,onValueChanged(d){},onOpened:function(d){},onClosed:function(d){d.component.option("dataSource",a._Cmb_Estatus_Empl_ObjData)},onInitialized:function(d){$_cmbEstatusSearch=d.component}}},{location:"after",widget:"dxButton",locateInMenu:"auto",options:{icon:"search",text:"Buscar",type:"default",onInitialized:function(d){$btn_Busca_Pop_Empleado=d.component},onClick(){if(null==$_cmbProcesoSearch.option("value")||
null==$_cmbSubProcesoSearch.option("value")||null==$_cmbEstatusSearch.option("value"))DevExpress.ui.notify({message:"Llena los campos marcados con *",minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"});else{a._Obj_Empleados_Grid_iEmp.clear();var d={...ReturnDefaultData_Init(),CAT_PROCESO_EMP_CSC:$_cmbProcesoSearch.option("value"),CAT_SUBPROCESO_EMP_CSC:$_cmbSubProcesoSearch.option("value"),ESTATUS_PROCESO_EMP_CSC:$_cmbEstatusSearch.option("value"),TIPO_CONSULTA:"AVANZADO",
INFO:"ALLEMP"};a.CargaEmpleadosBy(d,"ApiRecursosHumanos","GetEmpleado")}}}}]}})))});a._PopSearchEmpleado.show()};a.CargaEmpleadosBy=(c,b,d)=>{g.show();__Reques_ajax(getJSON(DeveloperType)[b].url+d,"GET",c,getJSON(DeveloperType)[b].token).then(e=>{1==e.success?e.JsonData.forEach(function(f){a._Obj_Empleados_Grid_iEmp.insert(f)}):DevExpress.ui.notify({message:"No se localizaron empleados",minWidth:150,type:"info",displayTime:5E3},{position:"bottom right",direction:"up-push"});$("#DataGridEmpleadosBusqueda").dxDataGrid("instance").refresh();
g.hide()}).catch(function(e){console.log(e);DevExpress.ui.notify("ERROR EN COMUNICACION AL SERVIDOR, INTENTELO NUEVAMENTE","error",3E3);$("#DataGridEmpleadosBusqueda").dxDataGrid("instance").refresh();g.hide()})};a.ActualizaDatosEmpleado=async function(){g.show();var c=JSON.stringify(a.DatosEmpleadosGet);a.DatosEmpleadosGet=JSON.parse(c);c=a.Frm_Datos_Empleado.option("formData");var b=GetUpdateData(a.DatosEmpleadosGet,c);delete b.EMPLEADO_PATHFOTO;c=0===Object.keys(b).length;var d=moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss");
1==a.Frm_Datos_Empleado.validate().isValid?1==c?(g.hide(),DevExpress.ui.notify({message:"No se detecto ningun cambio",minWidth:150,type:"info",displayTime:5E3},{position:"bottom right",direction:"up-push"})):(b.EMPLEADO_FECH_CAMBIO_PROCESO&&(b.EMPLEADO_FECH_CAMBIO_PROCESO=moment(b.EMPLEADO_FECH_CAMBIO_PROCESO).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss")),b.EMPLEADO_FECH_FIRMACONTRATO&&(b.EMPLEADO_FECH_FIRMACONTRATO=moment(b.EMPLEADO_FECH_FIRMACONTRATO).add(CalculaTimeposInsertUpdate(),
"hours").format("YYYY-MM-DD HH:mm:ss")),b.EMPLEADO_FECH_CAPACITACION&&(b.EMPLEADO_FECH_CAPACITACION=moment(b.EMPLEADO_FECH_CAPACITACION).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss")),b.EMPLEADO_FECH_INICIAOPERACION&&(b.EMPLEADO_FECH_INICIAOPERACION=moment(b.EMPLEADO_FECH_INICIAOPERACION).add(CalculaTimeposInsertUpdate(),"hours").format("YYYY-MM-DD HH:mm:ss")),b.EMPLEADO_FECH_REINGRESO&&(b.EMPLEADO_FECH_REINGRESO=moment(b.EMPLEADO_FECH_REINGRESO).add(CalculaTimeposInsertUpdate(),
"hours").format("YYYY-MM-DD HH:mm:ss")),b.AUDITORIA_FEC_ULT_MOD=d,b.AUDITORIA_USU_ULT_MOD=h.EMPLEADO_CSC_EMPLEADO,delete b.NOMBRE_JEFE_INMEDIATO,b.CAT_SUBPROCESO_EMP_CSC&&(console.log("Cambio de proceso"),await new Promise(function(e,f){var k=$("#dxFrmDetEmp").dxForm("instance").getEditor("CAT_PROCESO_EMP_CSC").option("selectedItem"),u=$("#dxFrmDetEmp").dxForm("instance").getEditor("CAT_SUBPROCESO_EMP_CSC").option("selectedItem"),l=$("#dxFrmDetEmp").dxForm("instance").getEditor("ESTATUS_PROCESO_EMP_CSC").option("selectedItem");
if("ACT"==l.CAT_ESTATUS_PROCESO_EMP_CLAVE){var m=0;if(null!==a.DatosEmpleadosGet.CAT_EMP_TREE_BAJA_CSC||null!==a.DatosEmpleadosGet.EMPLEADO_FECH_BAJAEMPLEADO)b.CAT_EMP_TREE_BAJA_CSC=null,b.EMPLEADO_FECH_BAJAEMPLEADO=null}else m=1;m={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,PROCESO_BAJA_EMPLEADO:m,EMPLEADO_ALTA:h.EMPLEADO_CSC_EMPLEADO};
__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"UpdateFinalizaBitacoraDateProceso","POST",JSON.stringify(m),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async function(n){n=void 0==a.DatosEmpleadosGet.CAM_CSC_SERVICIO||null==a.DatosEmpleadosGet.CAM_CSC_SERVICIO?0:a.DatosEmpleadosGet.CAM_CSC_SERVICIO;n={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),DATA_INSERT:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,
CAM_CSC_SERVICIO:n,CAT_PROCESO_EMP_CSC:k.CAT_PROCESO_EMP_CSC,CAT_SUBPROCESO_EMP_CSC:u.CAT_SUBPROCESO_EMP_CSC,CAT_ESTATUS_PROCESO_EMP_CSC:l.CAT_ESTATUS_PROCESO_EMP_CSC,PROCESO_FECHA_INICIO:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),RESPONSABLE_EMPLEADO_CSC:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO_PADRE,AUDITORIA_USU_ALTA:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_FEC_ALTA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")}};
__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Empleado_Proceso_Detalle","POST",JSON.stringify(n),getJSON(DeveloperType).ApiRecursosHumanos.token).then(async p=>{e("resolve")}).catch(function(){f("reject")})}).catch(function(){f("reject")})}),c=a.Frm_Datos_Empleado.getEditor("CAT_SUBPROCESO_EMP_CSC").option("selectedItem"),null!=c.CAT_SUBPROCESO_EMP_CLAVE&&"BAJA"==c.CAT_SUBPROCESO_EMP_CLAVE.trim()&&null!=a.DatosEmpleadosGet.TIPO_VACANTE_CSC&&0!=a.DatosEmpleadosGet.TIPO_VACANTE_CSC&&
a._Pop_Confirma_Baja_Vacantes.show()),c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),DATA_UPDATE:b,DATA_WHERE:{EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,EMPLEADO_UNIQUE_ID:a.DatosEmpleadosGet.EMPLEADO_UNIQUE_ID,EMP_CSC_EMPRESA_HOST:a.DatosEmpleadosGet.EMP_CSC_EMPRESA_HOST}},__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Update_Empleado","POST",JSON.stringify(c),
getJSON(DeveloperType).ApiRecursosHumanos.token).then(e=>{1==e.success&&(a.RestablecerBotonesEndUpdate(),DevExpress.ui.notify({message:"Empleado actualizado correctamente",minWidth:150,type:"success",displayTime:5E3},{position:"bottom right",direction:"up-push"}),e={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_UNIQUE_ID:a.DatosEmpleadosGet.EMPLEADO_UNIQUE_ID},a.BuscaEmpleados(e,
"CargaDatos"));g.hide()}).catch(function(e){g.hide();DevExpress.ui.notify({message:"Error en comunicaci\u00f3n con servidores",minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"})})):(g.hide(),DevExpress.ui.notify({message:"Llene los campos en rojo",minWidth:150,type:"error",displayTime:5E3},{position:"bottom right",direction:"up-push"}))};a.RestablecerBotonesEndUpdate=function(){var c=a.Frm_Datos_Empleado.option("formData");$btn_Alta_Empleado.option("visible",
!0);$btn_Modificar_Empleado.option("visible",!0);$btn_Salvar_Alta_Empleado.option("visible",!1);$btn_Salvar_Modifica_Empleado.option("visible",!1);$btn_Cancelar_Alta_Empleado.option("visible",!1);$btn_Cancelar_Modificar_Empleado.option("visible",!1);$btn_Busca_Avanzada_Empleado.option("disabled",!1);$Num_Id_Interno.option("disabled",!1);$Num_Id_Externo.option("disabled",!1);a.Frm_Datos_Empleado.option("readOnly",!0);1==c.ESTATUS_PROCESO_EMP_CSC&&a.ValidaUsuario({EMPLEADO_CSC_EMPLEADO:c.EMPLEADO_CSC_EMPLEADO})};
a.AbrirPopConfiguracion=function(c){var b={EMPLEADO_CSC_EMPLEADO:c.EMPLEADO_CSC_EMPLEADO};b={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),Type:localStorage.getItem("Type"),...b};var d=null,e=null;__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Get_Usuario","GET",b,getJSON(DeveloperType).ApiRecursosHumanos.token).then(f=>{e=1==f.success?"TpoUsuario="+c.TpoUsuario+"&idemp="+c.EMPLEADO_CSC_EMPLEADO+"&idusu="+f.JsonData[0].USU_CSC_USUARIO:
"TpoUsuario="+c.TpoUsuario+"&idemp="+c.EMPLEADO_CSC_EMPLEADO+"&idusu=null";"Seguridad"!=c.NAMESPACE&&"Seguridad"!=c.NAMESPACE&&0==f.success?DevExpress.ui.notify({message:'Genere usuario y contrase\u00f1a en el men\u00fa "SEGURIDAD"',minWidth:150,type:"info",displayTime:5E3},{position:"bottom right",direction:"up-push"}):(d="/"+a.patname.split("/")[1]+"/views/Vistas_Recursos_Humanos/"+c.NAMESPACE+"/"+c.NAMESPACE+".html?"+e,a._PopSearchEmpleado.option("title",c.EMPLEADO_MNU_DESCRIPCION1),a._PopSearchEmpleado.option("height",
c.h),a._PopSearchEmpleado.option("width",c.w),a._PopSearchEmpleado.option("contentTemplate",function(k){return $('<div style="height:100%;">').append("<iframe src="+d+' width="100%" height="100%" scrolling="auto" frameBorder="0" style=" flex-shrink: 1;flex-basis: auto;flex: 1; flex-grow: 1;"></iframe>')}),a._PopSearchEmpleado.show())});g.hide()};a.Get_Rh_Menu_Empleado=function(){var c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),
Type:localStorage.getItem("Type"),USU_CODESQUEMASEG:a.T_obj_SessionInfo.USU_CODESQUEMASEG,EMPLEADO_CSC_EMPLEADO:h.EMPLEADO_CSC_EMPLEADO};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Get_Rh_Menu_Empleado","GET",c,getJSON(DeveloperType).ApiRecursosHumanos.token).then(b=>{g.show();if(1==b.success){var d=[];jslinq(b.JsonData).orderBy(function(e){return parseInt(e.EMPLEADO_MNU_ORDEN)}).toList().forEach(function(e){const f={itemType:"button",horizontalAlignment:"left",buttonOptions:{icon:"data:image/png;base64,"+
toBase64(e.EMPLEADO_MNU_IMAGEN_GRANDE_ACTIVO.data),text:e.EMPLEADO_MNU_DESCRIPCION1,type:"default",width:"100%",stylingMode:"text",useSubmitBehavior:!0,onClick:function(){var k=a.Frm_Datos_Empleado.getEditor("EMPLEADO_CSC_EMPLEADO").option("value");null==k||0==k?DevExpress.ui.notify({message:"No ha seleccionado un empleado",minWidth:150,type:"info",displayTime:5E3},{position:"bottom right",direction:"up-push"}):a.AbrirPopConfiguracion({EMPLEADO_CSC_EMPLEADO:k,TpoUsuario:"ADMIN",w:800,h:520,NAMESPACE:e.EMPLEADO_MNU_WEB_NAMESPACE,
EMPLEADO_MNU_DESCRIPCION1:e.EMPLEADO_MNU_DESCRIPCION1})}}};d.push(f)});a.Btns_Configurador.option("items",d)}else console.log("Sin Men\u00fa Asignados");g.hide()})};a.Get_Rh_Menu_Empleado();a.ValidaUsuario=function(c){c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),Type:localStorage.getItem("Type"),...c};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Get_Usuario","GET",c,getJSON(DeveloperType).ApiRecursosHumanos.token).then(b=>
{1==b.success&&a.DesactivaUsuario(b.JsonData[0])})};a.DesactivaUsuario=function(c){c={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),DATA_UPDATE:{USU_INDICAACTIVO:0,USU_AUTENTIFICA_REMOTO:0},DATA_WHERE:{EMPLEADO_CSC_EMPLEADO:c.EMPLEADO_CSC_EMPLEADO,NEWID:c.NEWID,USU_CSC_USUARIO:c.USU_CSC_USUARIO,EMP_CSC_EMPRESA_HOST:c.EMP_CSC_EMPRESA_HOST}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+
"Update_Usuario","POST",JSON.stringify(c),getJSON(DeveloperType).ApiRecursosHumanos.token).then(b=>{1==b.success&&DevExpress.ui.notify({message:"Usuario desactivado",minWidth:150,type:"success",displayTime:5E3},{position:"bottom right",direction:"up-push"})})};a._LoadCatEspecializados=()=>{var c=[{Tbl:"Get_Country_Code"},{Tbl:"Get_TimeZone_Country"}].map(b=>a.CargaCatalogosEspecialPromise(b));Promise.all(c).then(b=>{a.CatalogosPantalla=b;b=jslinq(ObtenCatalogoPantalla(a.CatalogosPantalla,"Get_Country_Code")).toList();
var d=jslinq(ObtenCatalogoPantalla(a.CatalogosPantalla,"Get_TimeZone_Country")).toList();b.forEach(function(e){a._CountryCodes_ObjData.insert(e)});d.forEach(function(e){a._TimeZones_ObjData.insert(e)})}).catch(function(b){console.error("Ha ocurrido un error:",b)})};a.CargaCatalogosEspecialPromise=c=>new Promise((b,d)=>{try{__Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+c.Tbl,"GET",c,getJSON(DeveloperType).ApiGeneral.token).then(e=>{!0===e.success&&(e.CatName=c.Tbl);b(e)})}catch(e){d(e)}});
a._LoadCatalogos=()=>{var c=[{Tbl:"SAMT_CAT_ESTATUS_PROCESO_MPLEADOS"},{Tbl:"SAMT_CAT_PROCESO_EMPLEADOS"},{Tbl:"SAMT_CAT_SUBPROCESO_EMPLEADOS"},{Tbl:"SAMT_ESTATUS_HEADCOUNT"},{Tbl:"SAMT_SUBESTATUS_HEADCOUNT"}].map(b=>a.CargaCatalogosPromise(b,"Get_Cat_Full"));Promise.all(c).then(b=>{a.CatalogosPantalla=b;b=jslinq(ObtenCatalogoPantalla(a.CatalogosPantalla,"SAMT_CAT_PROCESO_EMPLEADOS")).toList();var d=jslinq(ObtenCatalogoPantalla(a.CatalogosPantalla,"SAMT_CAT_SUBPROCESO_EMPLEADOS")).toList(),e=jslinq(ObtenCatalogoPantalla(a.CatalogosPantalla,
"SAMT_CAT_ESTATUS_PROCESO_MPLEADOS")).toList();a.__Estatus_Headcount=jslinq(ObtenCatalogoPantalla(a.CatalogosPantalla,"SAMT_ESTATUS_HEADCOUNT")).toList();a.__Sub_Estatus_Headcount=jslinq(ObtenCatalogoPantalla(a.CatalogosPantalla,"SAMT_SUBESTATUS_HEADCOUNT")).toList();b.forEach(function(f){a._Cmb_Proceso_ObjData.insert(f)});e.forEach(function(f){a._Cmb_Estatus_Empl_ObjData.insert(f)});d.forEach(function(f){a._Cmb_SubProceso_ObjData.insert(f)})}).catch(function(b){console.error("Ha ocurrido un error:",
b)})};a.CargaCatalogosPromise=(c,b)=>new Promise((d,e)=>{try{__Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+b,"GET",c,getJSON(DeveloperType).ApiGeneral.token).then(f=>{!0===f.success&&(f.CatName=c.Tbl);d(f)})}catch(f){e(f)}});a.Refresh_Empleado_Mapa=function(){if(null!=a.DatosEmpleadosGet)if(null==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_PAIS_CSCPAIS||0==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_PAIS_CSCPAIS||null==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_EDO_CSCESTADO||0==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_EDO_CSCESTADO||
null==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_MUNICIPIO||""==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_MUNICIPIO.trim()||null==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_COLONIA||""==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_COLONIA.trim()||null==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_CALLE||""==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_CALLE.trim()||null==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_NUMERO_EXT||""==a.DatosEmpleadosGet.EMPLEADO_DIRECCION_NUMERO_EXT.trim())console.log("direcci\u00f3n incompleta para mostrar en el mapa");
else{var c=a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_PAIS_CSCPAIS").option("selectedItem");null==c||void 0==c?console.log("no se han cargado catalogos aun"):(c=a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_EDO_CSCESTADO").option("selectedItem"),null!=c&&void 0!=c||console.log("no se han cargado catalogo de estado aun"))}};a.Insert_Bitacora_Puestos_Anteriores=function(){var c={Type:localStorage.getItem("Type"),EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),
EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Get_Empleado_Puestos_Anteriores","GET",c,getJSON(DeveloperType).ApiRecursosHumanos.token).then(function(b){b=1==b.success?null==a.DatosEmpleadosGet.EMPLEADO_FECH_REINGRESO||void 0==a.DatosEmpleadosGet.EMPLEADO_FECH_REINGRESO?b.JsonData[0].PUESTO_ANT_FECHA_FINAL:a.DatosEmpleadosGet.EMPLEADO_FECH_REINGRESO:a.DatosEmpleadosGet.EMPLEADO_FECH_INGRESOEMP;b={Type:localStorage.getItem("Type"),
EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),DATA_INSERT:{EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_CSC_EMPLEADO:a.DatosEmpleadosGet.EMPLEADO_CSC_EMPLEADO,TIPO_PUESTO_CSCEMPLEADO:a.DatosEmpleadosGet.CAT_PUESTO_CSCEMPLEADO,CAT_CATEGORIA_PUESTO_CSC:a.DatosEmpleadosGet.CAT_CATEGORIA_PUESTO_CSC,PUESTO_ANT_FECHA_INICIAL:b,PUESTO_ANT_FECHA_FINAL:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_USU_ALTA:h.EMPLEADO_CSC_EMPLEADO,AUDITORIA_USU_ULT_MOD:h.EMPLEADO_CSC_EMPLEADO,
AUDITORIA_FEC_ALTA:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss"),AUDITORIA_FEC_ULT_MOD:moment().tz(a.TimeZoneServidor).format("YYYY-MM-DD HH:mm:ss")}};__Reques_ajax(getJSON(DeveloperType).ApiRecursosHumanos.url+"Insert_Empleado_Puestos_Anteriores","POST",JSON.stringify(b),getJSON(DeveloperType).ApiRecursosHumanos.token).then(d=>{a._Pop_Confirma_Baja_Vacantes.hide();DevExpress.ui.notify("VACANTE ACTUALIZADA","success",3E3);d={EMP_CLV_EMPRESA:localStorage.getItem("EMP_CLV_EMPRESA"),
Type:localStorage.getItem("Type"),EMP_CSC_EMPRESA_HOST:localStorage.getItem("EMP_CSC_EMPRESA_HOST"),EMPLEADO_UNIQUE_ID:a.DatosEmpleadosGet.EMPLEADO_UNIQUE_ID};a.BuscaEmpleados(d,"CargaDatos");g.hide()}).catch(function(d){g.hide();a._Pop_Confirma_Baja_Vacantes.hide();console.log(d);DevExpress.ui.notify("ERROR DE COMUNICACION CON BITACORA NO INSERTADA","error",3E3)})}).catch(function(b){console.log(b);g.hide();a._Pop_Confirma_Baja_Vacantes.hide();DevExpress.ui.notify("ERROR DE COMUNICACION ERROR AL BUSCAR BITACORA DE PUESTOS",
"error",3E3)})};a.Switch_Boton_Buscar_codigo_postal=function(){if(0==a.Frm_Datos_Empleado.option("readOnly")){var c=a.Frm_Datos_Empleado.getEditor("EMPLEADO_DIRECCION_PAIS_CSCPAIS").option("selectedItem");null==c?$Btn_buscar_codigo_postal.option("disabled",!0):"MX"==c.country_code?$Btn_buscar_codigo_postal.option("disabled",!1):$Btn_buscar_codigo_postal.option("disabled",!0)}else $Btn_buscar_codigo_postal.option("disabled",!0)};a._LoadCatalogos();a._LoadCatEspecializados()}};
function arrayBufferToHex(a){a=new DataView(a);let h="";for(let g=0;g<a.byteLength;g++){let q=a.getUint8(g).toString(16);q=1===q.length?"0"+q:q;h+=q}return h}setTimeout(()=>{SalesDashboard.currentModel=new SalesDashboard.dashboardModel;SalesDashboard.currentModel.init()},1E3);
