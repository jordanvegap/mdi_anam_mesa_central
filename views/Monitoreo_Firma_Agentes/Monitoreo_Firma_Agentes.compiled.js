SalesDashboard.dashboardModel=function(){var c=this;c.ioRealTimeSuraUrl="";c.socketConnection=null;c.ioRealTimeSuraUrl="Pru"==Db_Pro_Pru?"https://suraco.dnasystem.io:2003/":"https://suraco.dnasystem.io:2004/";c.socketConnection=io.connect(c.ioRealTimeSuraUrl,{forceNew:!0});c.init=function(){$("#splashscreen").fadeOut(1E3);Globalize.loadMessages(dictionary);var d=function(){var a=sessionStorage.getItem("locale");return null!=a?a:"es"}();Globalize.locale(d);DevExpress.localization.locale(d);c.patname=
window.location.pathname;obj_DatosEmpleado=JSON.parse(localStorage.getItem("obj_DatosEmpleado"));$("#gridAgentes").dxDataGrid({selection:{mode:"single"},height:"100%",paging:{enabled:!1,pageIndex:0,pageSize:20},rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!1,applyFilter:"auto"},repaintChangesOnly:!0,highlightChanges:!0,loadPanel:{enabled:!1},onRowDblClick:async function(a){},columns:[{caption:"SOLICITANTE",dataField:"EMPLEADO_CSC_EMPLEADO",alignment:"left",lookup:{displayExpr:"NOMBRE",
valueExpr:"EMPLEADO_CSC_EMPLEADO",dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){return JSON.parse(sessionStorage.getItem("all_emp_host"))}})}}},{caption:"TIEMPO TOTAL FIRMADO",dataField:"PRESENCIA_FECHA_ACTUALIZACION_FIRMA",calculateCellValue:function(a){var b=moment().tz(localStorage.getItem("tmzServidor")).format("YYYY-MM-DD HH:mm:ss");a=moment(a.PRESENCIA_FECHA_PRIMERA_FIRMA);b=moment(b).diff(a,"miliseconds");b=moment.duration(b);return("0"+
b.days()).slice(-2)+"d "+("0"+b.hours()).slice(-2)+":"+("0"+b.minutes()).slice(-2)+":"+("0"+b.seconds()).slice(-2)}},{caption:"Servicio",dataField:"CAM_CSC_SERVICIO",groupIndex:0,lookup:{dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CAM_MESA_DE_AYUDA",NACTIVE:"CAM_MESA_ACTIVO",NDEFAULT:"CAM_MESA_ORDEN"},getJSON(DeveloperType).ApiGeneral.token).then(a=>
{if(1==a.success)return a.JsonData;console.log(a.message)})}catch(a){console.log(a)}}})},displayExpr:"CAM_MESA_IDIOMA1",valueExpr:"CAM_MESA_CSC"}},{caption:"ESTATUS",dataField:"ESTATUS_PRESENCIA_CSC",width:200,lookup:{dataSource:{store:new DevExpress.data.CustomStore({loadMode:"raw",paginate:!1,load:async function(){try{return __Get_catalogos(getJSON(DeveloperType).ApiGeneral.url+"Get_Cat_Full","GET",{Tbl:"SAMT_CAM_ESTATUS_PRESENCIA",NACTIVE:"ESTATUS_ACTIVO",NDEFAULT:"ESTATUS_DEFAULT"},getJSON(DeveloperType).ApiGeneral.token).then(a=>
{if(1==a.success)return a.JsonData;console.log(a.message)})}catch(a){console.log(a)}}})},displayExpr:"ESTATUS_IDIOMA1",valueExpr:"ESTATUS_PRESENCIA_CSC"}},{caption:"TIEMPO EN ESTATUS",dataField:"PRESENCIA_FECHA_ESTATUS",calculateCellValue:function(a){var b=moment().tz(localStorage.getItem("tmzServidor")).format("YYYY-MM-DD HH:mm:ss");a=moment(a.PRESENCIA_FECHA_ESTATUS);b=moment(b).diff(a,"miliseconds");b=moment.duration(b);return("0"+b.days()).slice(-2)+"d "+("0"+b.hours()).slice(-2)+":"+("0"+b.minutes()).slice(-2)+
":"+("0"+b.seconds()).slice(-2)}}]})};c.socketConnection.on("Result_AgentesFirma",d=>{$("#gridAgentes").dxDataGrid("instance").option("dataSource",d.JsonData)});c.socketConnection.on("Result_Solicitudes_Fila",d=>{console.log(d)})};setTimeout(()=>{SalesDashboard.currentModel=new SalesDashboard.dashboardModel;SalesDashboard.currentModel.init()},1E3);
